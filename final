import SwiftUI

@main
struct YourProjectNameApp: App {
    var body: some Scene {
        WindowGroup {
            // 这里调用容器视图，它负责管理两个页面的切换
            MainView()
        }
    }
}





import SwiftUI

struct MainView: View {
    @State private var isPlayingPagePresented = false
    @State private var dragOffset: CGFloat = 0
    
    var body: some View {
        ZStack {
            // 背景层：第一个界面
            ContentView()
                .scaleEffect(isPlayingPagePresented ? 0.95 : 1.0 - (dragOffset / 2000))
                .blur(radius: isPlayingPagePresented ? 10 : (dragOffset / 100))
            
            // 覆盖层：第二个界面 (PlayPage)
            if isPlayingPagePresented || dragOffset > 0 {
                PlayPage(isPresented: $isPlayingPagePresented)
                    .offset(y: isPlayingPagePresented ? 0 : -UIScreen.main.bounds.height)
                    .offset(y: dragOffset)
                    .transition(.move(edge: .top))
            }
        }
        .background(Color.black.ignoresSafeArea())
        .animation(.spring(response: 0.5, dampingFraction: 0.8), value: isPlayingPagePresented)
        .animation(.interactiveSpring(), value: dragOffset)
        .gesture(
            DragGesture(minimumDistance: 10)
                .onChanged { value in
                    if !isPlayingPagePresented && value.translation.height > 0 {
                        dragOffset = value.translation.height
                    }
                }
                .onEnded { value in
                    if value.translation.height > 150 {
                        isPlayingPagePresented = true
                    }
                    dragOffset = 0
                }
        )
    }
}







import SwiftUI

struct ContentView: View {
    @State private var bannerAnimate = false
    
    var currentDateText: String {
        let formatter = DateFormatter()
        formatter.dateFormat = "yyyy年M月d日"
        return formatter.string(from: Date())
    }

    var body: some View {
        ScrollView(.vertical, showsIndicators: false) {
            VStack(spacing: 40) {
                // 顶部导航
                HStack {
                    Circle().stroke(Color.white.opacity(0.4), lineWidth: 1).frame(width: 34, height: 34)
                        .overlay(Text("logo").font(.system(size: 8)).foregroundColor(.white))
                    Text("Brand Name").font(.system(size: 20, weight: .bold)).foregroundColor(.white)
                    Spacer()
                    Image(systemName: "sparkles").padding(8).background(Circle().stroke(Color.white.opacity(0.4))).foregroundColor(.white)
                }.padding(.horizontal)

                // 核心 Banner
                ZStack(alignment: .bottomLeading) {
                    Image("image_share").resizable().aspectRatio(contentMode: .fill)
                        .scaleEffect(bannerAnimate ? 1.2 : 1.0)
                    Text("分享并邀请").font(.system(size: 22, weight: .heavy)).foregroundColor(.white).padding(24)
                }
                .frame(height: 200).frame(maxWidth: .infinity).clipShape(RoundedRectangle(cornerRadius: 28))
                .glassStyle(opacity: 0.74, cornerRadius: 28) // 显式传递参数修复报错
                .padding(.horizontal)
                .onAppear { withAnimation(.easeInOut(duration: 8).repeatForever()) { bannerAnimate = true } }

                // 场景区块
                VStack(alignment: .leading, spacing: 18) {
                    Text("场景").font(.system(size: 24, weight: .bold)).foregroundColor(.white).padding(.horizontal)
                    HStack(spacing: 14) {
                        SceneCard(title: "专注", imageName: "focus", height: 210)
                        SceneCard(title: "冥想", imageName: "meditate", height: 210)
                    }.padding(.horizontal)
                }

                // 底部声音预览
                VStack(alignment: .leading, spacing: 15) {
                    Text("晚上好，用户").font(.system(size: 18, weight: .bold)).foregroundColor(.white)
                    Text("现在是\(currentDateText)").font(.system(size: 14)).foregroundColor(.gray)
                }.frame(maxWidth: .infinity, alignment: .leading).padding(.horizontal)
            }
            .padding(.top, 20)
        }
        .background(Color.black.ignoresSafeArea())
    }
}

// 辅助组件
struct SceneCard: View {
    var title: String; var imageName: String; var height: CGFloat
    var body: some View {
        ZStack(alignment: .topLeading) {
            Image(imageName).resizable().scaledToFit().padding(12)
            Text(title).font(.system(size: 18, weight: .bold)).foregroundColor(.white).padding(16)
        }
        .frame(maxWidth: .infinity).frame(height: height)
        .glassStyle(opacity: 1.0, cornerRadius: 28)
    }
}



import SwiftUI

struct PlayPage: View {
    @Binding var isPresented: Bool
    @State private var selectedTab: Int = 0
    @State private var innerDragOffset: CGFloat = 0
    
    var body: some View {
        ZStack {
            Color.black.ignoresSafeArea()
            
            VStack(spacing: 0) {
                Capsule().fill(Color.white.opacity(0.3)).frame(width: 40, height: 5).padding(.top, 12)
                
                VStack(spacing: 8) {
                    Text(selectedTab == 0 ? "白噪音" : "自然之声").font(.system(size: 28, weight: .bold)).foregroundColor(.white)
                    Text("夜间好梦").font(.system(size: 14)).foregroundColor(.gray)
                }.padding(.top, 30)
                
                Spacer()
                
                // 交互按钮
                VStack(spacing: 30) {
                    HStack(spacing: 15) {
                        TabButton(title: "白噪音", isSelected: selectedTab == 0) { selectedTab = 0 }
                        TabButton(title: "自然之声", isSelected: selectedTab == 1) { selectedTab = 1 }
                    }.padding(.horizontal, 20)
                    
                    HStack(spacing: 40) {
                        Image(systemName: "pause.fill").font(.title).foregroundColor(.white).frame(width: 60, height: 60).background(Circle().fill(Color.white.opacity(0.1)))
                        Image(systemName: "timer").font(.title3).foregroundColor(.white)
                    }
                    
                    Button("发现") {}.font(.headline).foregroundColor(.white).frame(maxWidth: .infinity).frame(height: 70).glassStyle(opacity: 0.4, cornerRadius: 35).padding(.horizontal, 20).padding(.bottom, 40)
                }
            }
            .offset(y: innerDragOffset)
        }
        .clipShape(RoundedRectangle(cornerRadius: innerDragOffset > 0 ? 40 : 0))
        .gesture(
            DragGesture().onChanged { v in if v.translation.height > 0 { innerDragOffset = v.translation.height } }
                .onEnded { v in
                    if v.translation.height > 150 { isPresented = false }
                    innerDragOffset = 0
                }
        )
    }
}

struct TabButton: View {
    var title: String; var isSelected: Bool; var action: () -> Void
    var body: some View {
        Button(action: action) {
            Text(title).foregroundColor(.white).frame(maxWidth: .infinity).frame(height: 60)
                .glassStyle(opacity: isSelected ? 0.74 : 0.15, cornerRadius: 20, showBorder: isSelected)
        }
    }
}

// MARK: - 统一玻璃样式与修复报错
extension View {
    func glassStyle(opacity: Double, cornerRadius: CGFloat, showBorder: Bool = false) -> some View {
        self.background(
            ZStack {
                Color(red: 15/255, green: 15/255, blue: 15/255).opacity(opacity) // #0F0F0F
                LinearGradient(colors: [.white.opacity(0.1), .clear], startPoint: .topLeading, endPoint: .bottomTrailing)
            }
        )
        .cornerRadius(cornerRadius)
        .overlay(
            RoundedRectangle(cornerRadius: cornerRadius)
                .stroke(Color.white.opacity(showBorder ? 0.3 : 0.1), lineWidth: 1)
        )
    }
}
